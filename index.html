<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>數位書櫃：視覺化教學資源網</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts: Noto Serif & Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .font-serif { font-family: 'Noto Serif TC', serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .line-clamp-4 { display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; overflow: hidden; }
        
        /* 平滑滾動 */
        html { scroll-behavior: smooth; }

        /* 圖片比例 */
        .book-card-aspect { aspect-ratio: 2/3; }

        /* 背景模糊動畫 */
        .hero-bg {
            transition: background-image 0.8s ease-in-out;
        }

        /* 音樂波紋動畫 */
        .music-bar {
            width: 2px;
            height: 12px;
            background: #fde68a;
            margin: 0 1px;
            animation: music-wave 1s ease-in-out infinite;
            display: inline-block;
        }
        .music-bar:nth-child(2) { animation-delay: 0.2s; }
        .music-bar:nth-child(3) { animation-delay: 0.4s; }
        @keyframes music-wave {
            0%, 100% { height: 4px; }
            50% { height: 16px; }
        }

        /* 進入頁面覆蓋層 */
        #entrance-overlay {
            background-image: radial-gradient(circle at center, #292524 0%, #0c0a09 100%);
        }

        /* 強化版滾動條樣式 (僅限彈窗) */
        #modal-content-area {
            scrollbar-gutter: stable; /* 預留滾動條空間，避免內容跳動 */
        }
        #modal-content-area::-webkit-scrollbar {
            width: 10px; /* 加寬滾動條 */
        }
        #modal-content-area::-webkit-scrollbar-track {
            background: #f5f5f4; /* 淺灰色軌道 */
            border-radius: 0 0 10px 0;
        }
        #modal-content-area::-webkit-scrollbar-thumb {
            background: #a8a29e; /* 深石色滑塊，更清晰 */
            border-radius: 10px;
            border: 2px solid #f5f5f4; /* 增加邊距讓滑塊更好看 */
        }
        #modal-content-area::-webkit-scrollbar-thumb:hover {
            background: #78716c;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 transition-colors duration-500 overflow-x-hidden">

    <!-- 進入頁面門檻 -->
    <div id="entrance-overlay" class="fixed inset-0 z-[200] flex flex-col items-center justify-center text-white px-6">
        <div class="mb-12 text-center animate-in fade-in zoom-in duration-1000">
            <i data-lucide="book-marked" class="w-16 h-16 mx-auto mb-6 text-amber-200/60"></i>
            <h1 class="text-4xl md:text-6xl font-serif font-bold tracking-[0.3em] mb-4">數位書櫃</h1>
            <p class="text-stone-400 tracking-[0.5em] font-light text-sm md:text-base">VISUALIZED TEACHING RESOURCES</p>
        </div>
        <button id="start-btn" class="group relative px-10 py-4 bg-white/5 hover:bg-white/10 border border-white/20 rounded-full overflow-hidden transition-all hover:scale-105 active:scale-95 shadow-2xl">
            <span class="relative z-10 text-lg tracking-[0.4em] font-serif group-hover:text-amber-200 transition-colors">開啟書卷，靜心閱讀</span>
            <div class="absolute inset-0 bg-gradient-to-r from-amber-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
        </button>
        <p class="mt-8 text-stone-500 text-xs tracking-widest animate-pulse italic">點擊按鈕後將開始播放沉浸式配樂</p>
    </div>

    <!-- 載入中畫面 -->
    <div id="loading-screen" class="fixed inset-0 z-[100] bg-stone-50 hidden flex flex-col items-center justify-center">
        <div class="w-12 h-12 border-4 border-stone-200 border-t-stone-800 rounded-full animate-spin mb-4"></div>
        <p class="font-serif tracking-widest text-lg text-stone-600">載入書卷中...</p>
    </div>

    <!-- 音訊資源 -->
    <audio id="bg-music" loop preload="auto">
        <source src="https://cdn.pixabay.com/download/audio/2025/06/06/audio_cd7be0eafc.mp3?filename=tunetank-ambient-piano-music-348968.mp3" type="audio/mpeg">
    </audio>
    <audio id="sfx-page" preload="auto">
        <source src="https://cdn.pixabay.com/download/audio/2025/11/25/audio_26e276330f.mp3?filename=spinopel-turn-the-page-of-a-book-442331.mp3" type="audio/mpeg">
    </audio>

    <!-- Hero Section -->
    <section id="hero" class="relative h-[65vh] md:h-[80vh] flex items-center justify-center overflow-hidden bg-stone-900 text-white">
        <div id="hero-image" class="absolute inset-0 opacity-30 bg-cover bg-center blur-sm scale-105 transition-all duration-1000"></div>
        <div class="relative z-10 text-center px-6 max-w-4xl">
            <i data-lucide="sparkles" class="mx-auto mb-4 md:mb-6 text-amber-200 opacity-80 w-6 h-6 md:w-8 md:h-8"></i>
            <h2 id="hero-quote" class="text-xl md:text-4xl font-serif italic mb-6 md:mb-10 leading-relaxed tracking-wide px-4"></h2>
            <div class="h-px w-16 md:w-24 bg-amber-200 mx-auto mb-6 opacity-50"></div>
            <p id="hero-book" class="text-stone-300 font-light tracking-[0.15em] text-sm md:text-base mb-12"></p>
            
            <div class="flex flex-wrap items-center justify-center gap-4">
                <a href="https://drive.google.com/drive/folders/1cfsHMrUCWQapSzjw37gOyxsONBopGRdi?usp=sharing" target="_blank" class="inline-flex items-center gap-2 px-8 py-3.5 bg-white/10 hover:bg-white/20 backdrop-blur-md border border-white/30 rounded-full text-sm tracking-[0.2em] transition-all hover:scale-105 active:scale-95 shadow-lg">
                    <i data-lucide="folder-open" class="w-4 h-4 text-amber-200"></i>
                    瀏覽雲端資源
                </a>
                
                <button id="music-toggle" class="inline-flex items-center gap-3 px-8 py-3.5 bg-amber-200/10 hover:bg-amber-200/20 backdrop-blur-md border border-amber-200/30 rounded-full text-sm tracking-[0.2em] transition-all hover:scale-105 active:scale-95 group">
                    <div id="music-bars" class="hidden flex items-end h-4">
                        <span class="music-bar"></span>
                        <span class="music-bar"></span>
                        <span class="music-bar"></span>
                    </div>
                    <i id="music-icon" data-lucide="music" class="w-4 h-4 text-amber-200"></i>
                    <span id="music-text">暫停音樂</span>
                </button>
            </div>
        </div>
    </section>

    <!-- 控制列 -->
    <div class="sticky top-0 z-40 bg-white/95 backdrop-blur-md border-b border-stone-200 shadow-sm">
        <div class="max-w-7xl mx-auto flex flex-col gap-3 p-3 md:p-5">
            <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
                <div class="relative w-full md:w-96">
                    <i data-lucide="search" class="absolute left-4 top-1/2 -translate-y-1/2 text-stone-400 w-5 h-5"></i>
                    <input 
                        type="text" 
                        id="search-input"
                        placeholder="搜尋書名、作者或關鍵字..."
                        class="w-full pl-12 pr-4 py-3 bg-stone-100 border-transparent focus:bg-white border focus:border-stone-300 rounded-2xl focus:outline-none transition-all text-sm md:text-base appearance-none shadow-inner"
                    >
                </div>
                
                <div class="flex items-center gap-6">
                    <a href="https://drive.google.com/drive/folders/1cfsHMrUCWQapSzjw37gOyxsONBopGRdi?usp=sharing" target="_blank" class="hidden md:flex items-center gap-2 text-stone-500 hover:text-stone-800 transition-colors text-sm font-medium">
                        <i data-lucide="cloud" class="w-4 h-4 text-stone-300"></i>
                        雲端資源庫
                    </a>
                </div>
            </div>
            
            <div class="flex items-center gap-2 overflow-x-auto no-scrollbar py-1">
                <i data-lucide="filter" class="text-stone-400 flex-shrink-0 w-4 h-4 mr-1 hidden md:block"></i>
                <div id="filter-container" class="flex gap-2"></div>
            </div>
        </div>
    </div>

    <!-- 書籍網格 -->
    <main class="max-w-7xl mx-auto px-4 md:px-6 mt-8 mb-24 text-center md:text-left">
        <div id="book-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-12"></div>
        <div id="empty-state" class="hidden py-32 text-center text-stone-400">
            <i data-lucide="book-open" class="mx-auto mb-4 opacity-20 w-16 h-16"></i>
            <p class="text-lg">沒有找到符合搜尋條件的書籍</p>
        </div>
    </main>

    <!-- 詳情彈窗 -->
    <div id="modal" class="fixed inset-0 z-50 hidden flex items-end md:items-center justify-center p-0 md:p-6">
        <div id="modal-overlay" class="absolute inset-0 bg-stone-900/80 backdrop-blur-md"></div>
        <!-- 修正：將 md:h-auto 改為 md:h-[85vh] 固定高度，確保觸發內部滾動條 -->
        <div class="relative bg-white w-full max-w-6xl h-[95vh] md:h-[85vh] rounded-t-[2.5rem] md:rounded-[2rem] overflow-hidden shadow-2xl animate-in slide-in-from-bottom duration-300">
            <div class="flex flex-col md:flex-row h-full">
                <!-- 關閉按鈕 -->
                <button id="modal-close" class="absolute top-6 right-6 z-50 p-2.5 bg-stone-900/10 hover:bg-stone-900/20 rounded-full text-stone-800 backdrop-blur-md transition-all shadow-sm">
                    <i data-lucide="x" class="w-6 h-6 md:w-8 md:h-8"></i>
                </button>
                
                <!-- 左側封面 (固定比例) -->
                <div class="w-full h-[30%] md:h-auto md:w-[38%] bg-stone-200 flex-shrink-0">
                    <img id="modal-cover" src="" alt="" class="w-full h-full object-cover">
                </div>

                <!-- 右側內容區 (獨立滾動) -->
                <div id="modal-content-area" class="w-full md:w-[62%] p-8 md:p-16 overflow-y-auto bg-stone-50 h-full">
                    <div class="mb-10 md:mb-14">
                        <span id="modal-unit" class="text-amber-600 text-sm md:text-lg font-bold tracking-[0.2em] uppercase mb-4 block"></span>
                        <h2 id="modal-title" class="text-3xl md:text-6xl font-serif font-bold text-stone-900 mb-6 leading-[1.15]"></h2>
                        <div class="flex flex-wrap items-center gap-8 text-stone-500 text-base md:text-2xl">
                            <span class="flex items-center gap-2.5 font-light"><i data-lucide="user" class="w-5 h-5 md:w-7 md:h-7 text-stone-300"></i> <span id="modal-author"></span></span>
                            <span class="flex items-center gap-2.5 font-light"><i data-lucide="calendar" class="w-5 h-5 md:w-7 md:h-7 text-stone-300"></i> <span id="modal-year"></span></span>
                        </div>
                    </div>

                    <div class="space-y-12 md:space-y-16 text-stone-700">
                        <div class="relative p-8 md:p-14 bg-white rounded-[2rem] border-l-[16px] border-stone-800 shadow-xl italic group">
                            <i data-lucide="quote" class="absolute -top-8 -left-6 text-stone-50 w-24 h-24 md:w-32 md:h-32 opacity-80 transition-transform group-hover:scale-110"></i>
                            <p id="modal-quote" class="leading-relaxed font-serif text-2xl md:text-4xl relative z-10 text-stone-800"></p>
                        </div>

                        <section>
                            <h4 class="flex items-center gap-4 text-stone-900 font-bold mb-6 border-b-2 border-stone-200 pb-4 text-2xl md:text-3xl">
                                <i data-lucide="sparkles" class="text-amber-500 w-7 h-7 md:w-9 md:h-9"></i> 核心論點
                            </h4>
                            <p id="modal-argument" class="text-xl md:text-3xl leading-[1.8] text-stone-600 font-light"></p>
                        </section>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">
                            <section>
                                <h4 class="text-stone-900 font-bold mb-5 text-sm md:text-base uppercase tracking-[0.3em] opacity-40">理論架構</h4>
                                <p id="modal-framework" class="text-lg md:text-2xl leading-relaxed text-stone-600 bg-stone-200/40 p-6 md:p-8 rounded-[1.5rem] border border-stone-200/50"></p>
                            </section>
                            <section>
                                <h4 class="text-stone-900 font-bold mb-5 text-sm md:text-base uppercase tracking-[0.3em] opacity-40">學術定位</h4>
                                <p id="modal-position" class="text-lg md:text-2xl leading-relaxed text-stone-600 bg-stone-200/40 p-6 md:p-8 rounded-[1.5rem] border border-stone-200/50"></p>
                            </section>
                        </div>

                        <section class="bg-amber-50/70 p-10 md:p-16 rounded-[2.5rem] border border-amber-100/50 mb-20 shadow-inner">
                            <h4 class="flex items-center gap-5 text-amber-900 font-bold mb-10 text-2xl md:text-4xl">
                                <i data-lucide="graduation-cap" class="text-amber-700 w-10 h-10 md:w-14 md:h-14"></i> 教學應用建議
                            </h4>
                            <p id="modal-teaching" class="text-xl md:text-3xl leading-[1.8] whitespace-pre-wrap text-stone-800 font-normal"></p>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <button id="back-to-top" class="fixed bottom-8 right-8 z-30 p-4 bg-stone-800 text-white rounded-full shadow-2xl opacity-0 translate-y-10 transition-all duration-300 pointer-events-none hover:bg-stone-700">
        <i data-lucide="arrow-up" class="w-8 h-8"></i>
    </button>

    <footer class="py-24 border-t border-stone-200 text-center text-stone-400 bg-stone-100/50">
        <div class="flex flex-col items-center gap-8">
            <div class="flex items-center justify-center gap-6">
                <div class="w-12 h-px bg-stone-200"></div>
                <i data-lucide="book-open" class="opacity-50 w-6 h-6"></i>
                <div class="w-12 h-px bg-stone-200"></div>
            </div>
            <p class="text-sm tracking-[0.3em] font-light">數位書櫃：視覺化教學資源系統</p>
            <div class="flex gap-8">
                <a href="https://drive.google.com/drive/folders/1cfsHMrUCWQapSzjw37gOyxsONBopGRdi?usp=sharing" target="_blank" class="text-sm text-stone-400 hover:text-stone-700 underline underline-offset-8 decoration-stone-200 transition-colors">
                    雲端資源檔案夾
                </a>
            </div>
        </div>
    </footer>

    <script>
        const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vS_cqaP-vZr1MW-RYFmbWsCD9FKEwRDXq8lHjI12Sl5z0VwfnvQgurnhE3PDVXrK1cqMRhaMLKVx9XG/pub?gid=1650364862&single=true&output=csv";
        
        let allBooks = [];
        let currentFilter = '全部';
        let currentSearch = '';

        const bgMusic = document.getElementById('bg-music');
        const pageSfx = document.getElementById('sfx-page');
        const musicToggle = document.getElementById('music-toggle');
        const musicIcon = document.getElementById('music-icon');
        const musicText = document.getElementById('music-text');
        const musicBars = document.getElementById('music-bars');
        let isPlaying = false;

        const initIcons = () => lucide.createIcons();

        // 翻書音效觸發
        const playPageSfx = () => {
            pageSfx.currentTime = 0;
            pageSfx.play().catch(e => console.log("SFX play failed"));
        };

        // 開場按鈕邏輯
        document.getElementById('start-btn').onclick = () => {
            bgMusic.play().then(() => {
                isPlaying = true;
                musicIcon.classList.add('hidden');
                musicBars.classList.remove('hidden');
                musicText.textContent = "暫停背景配樂";
            }).catch(e => console.log("BGM play failed"));

            document.getElementById('entrance-overlay').classList.add('hidden');
            document.body.style.overflow = 'auto';
            loadData();
        };

        // 離開頁面停止音樂 (Visibility API)
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                if (isPlaying) bgMusic.pause();
            } else {
                if (isPlaying) bgMusic.play();
            }
        });

        function parseCSV(text) {
            const rows = text.split('\n');
            return rows.slice(1).map(row => {
                const matches = row.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);
                if (!matches) return null;
                return matches.map(m => m.replace(/^"|"$/g, '').trim());
            }).filter(r => r && r.length >= 5);
        }

        async function loadData() {
            document.getElementById('loading-screen').classList.remove('hidden');
            try {
                const response = await fetch(SHEET_CSV_URL);
                const text = await response.text();
                const data = parseCSV(text);

                allBooks = data.map((row, index) => ({
                    id: index,
                    title: row[0] || '未知書名',
                    author: row[1] || '未知作者',
                    year: row[2] || '',
                    coreArgument: row[3] || '',
                    quote: row[4] || '',
                    framework: row[5] || '',
                    position: row[6] || '',
                    teachingUnit: row[7] || '未分類',
                    teachingApp: row[8] || '',
                    cover: row[9] || 'https://images.unsplash.com/photo-1543004218-ee141104975a?auto=format&fit=crop&q=80&w=400'
                }));

                setupHero();
                setupFilters();
                renderBooks();
                document.getElementById('loading-screen').classList.add('hidden');
            } catch (error) {
                console.error("Error loading data:", error);
                document.getElementById('loading-screen').innerHTML = `<p class='text-red-500 text-center px-6 text-xl'>資料載入失敗，請確認網路連線。</p>`;
            }
        }

        function setupHero() {
            if (allBooks.length === 0) return;
            const randomBook = allBooks[Math.floor(Math.random() * allBooks.length)];
            document.getElementById('hero-image').style.backgroundImage = `url('${randomBook.cover}')`;
            document.getElementById('hero-quote').textContent = randomBook.quote;
            document.getElementById('hero-book').textContent = `—— 《${randomBook.title}》`;
        }

        function setupFilters() {
            const units = ['全部', ...new Set(allBooks.flatMap(b => b.teachingUnit.split(/[、,，]/).map(u => u.trim())).filter(u => u))];
            const container = document.getElementById('filter-container');
            container.innerHTML = ''; 

            units.forEach(unit => {
                const btn = document.createElement('button');
                btn.className = `filter-btn px-6 py-3 rounded-full text-xs md:text-sm whitespace-nowrap transition-all border ${unit === '全部' ? 'bg-stone-800 text-white border-stone-800 shadow-md' : 'bg-white text-stone-500 border-stone-200 active:scale-95'}`;
                btn.textContent = unit;
                btn.onclick = () => {
                    currentFilter = unit;
                    document.querySelectorAll('.filter-btn').forEach(b => {
                        b.classList.remove('bg-stone-800', 'text-white', 'border-stone-800', 'shadow-md');
                        b.classList.add('bg-white', 'text-stone-500', 'border-stone-200');
                    });
                    btn.classList.add('bg-stone-800', 'text-white', 'border-stone-800', 'shadow-md');
                    btn.classList.remove('bg-white', 'text-stone-500', 'border-stone-200');
                    renderBooks();
                };
                container.appendChild(btn);
            });
        }

        function renderBooks() {
            const grid = document.getElementById('book-grid');
            const emptyState = document.getElementById('empty-state');
            grid.innerHTML = '';

            const filtered = allBooks.filter(book => {
                const matchesSearch = book.title.toLowerCase().includes(currentSearch.toLowerCase()) || 
                                     book.author.toLowerCase().includes(currentSearch.toLowerCase()) ||
                                     book.quote.toLowerCase().includes(currentSearch.toLowerCase());
                const matchesFilter = currentFilter === '全部' || book.teachingUnit.includes(currentFilter);
                return matchesSearch && matchesFilter;
            });

            if (filtered.length === 0) {
                emptyState.classList.remove('hidden');
            } else {
                emptyState.classList.add('hidden');
                filtered.forEach(book => {
                    const card = document.createElement('div');
                    card.className = "group cursor-pointer flex flex-col";
                    card.onclick = () => openModal(book);
                    card.innerHTML = `
                        <div class="relative book-card-aspect rounded-[1.5rem] md:rounded-[2rem] overflow-hidden shadow-sm md:shadow-2xl transition-all duration-500 group-hover:-translate-y-3 bg-stone-200">
                            <img src="${book.cover}" class="w-full h-full object-cover transition-scale duration-700 group-hover:scale-110" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1543004218-ee141104975a?auto=format&fit=crop&q=80&w=400'">
                            <div class="absolute inset-0 bg-stone-900/75 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center p-8 text-center hidden md:flex">
                                <p class="text-white text-sm font-serif italic leading-relaxed line-clamp-4">${book.quote}</p>
                            </div>
                        </div>
                        <div class="mt-6 px-1">
                            <h3 class="font-serif text-lg md:text-2xl font-bold text-stone-900 leading-tight group-hover:text-amber-700 transition-colors line-clamp-2">${book.title}</h3>
                            <p class="text-stone-500 text-sm md:text-base mt-3 flex items-center justify-center md:justify-start gap-2"><i data-lucide="user" class="w-4 h-4 text-stone-300"></i> ${book.author}</p>
                        </div>
                    `;
                    grid.appendChild(card);
                });
            }
            initIcons();
        }

        function openModal(book) {
            playPageSfx(); 
            document.getElementById('modal-title').textContent = book.title;
            document.getElementById('modal-author').textContent = book.author;
            document.getElementById('modal-year').textContent = book.year;
            document.getElementById('modal-unit').textContent = book.teachingUnit;
            document.getElementById('modal-quote').textContent = book.quote;
            document.getElementById('modal-argument').textContent = book.coreArgument;
            document.getElementById('modal-framework').textContent = book.framework;
            document.getElementById('modal-position').textContent = book.position;
            document.getElementById('modal-teaching').textContent = book.teachingApp;
            document.getElementById('modal-cover').src = book.cover;
            
            document.getElementById('modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            // 開啟時重置滾動位置
            document.getElementById('modal-content-area').scrollTop = 0;
            initIcons();
        }

        function closeModal() {
            playPageSfx(); 
            document.getElementById('modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // 音樂控制
        musicToggle.onclick = () => {
            if (!isPlaying) {
                bgMusic.play().then(() => {
                    isPlaying = true;
                    musicIcon.classList.add('hidden');
                    musicBars.classList.remove('hidden');
                    musicText.textContent = "暫停背景配樂";
                }).catch(e => console.log("需互動後才能播放"));
            } else {
                bgMusic.pause();
                isPlaying = false;
                musicIcon.classList.remove('hidden');
                musicBars.classList.add('hidden');
                musicText.textContent = "開啟背景配樂";
            }
        };

        const bttBtn = document.getElementById('back-to-top');
        window.onscroll = () => {
            if (window.scrollY > 400) {
                bttBtn.classList.remove('opacity-0', 'translate-y-10', 'pointer-events-none');
            } else {
                bttBtn.classList.add('opacity-0', 'translate-y-10', 'pointer-events-none');
            }
        };
        bttBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });

        document.getElementById('modal-close').onclick = closeModal;
        document.getElementById('modal-overlay').onclick = closeModal;
        document.getElementById('search-input').oninput = (e) => {
            currentSearch = e.target.value;
            renderBooks();
        };

        // 預設禁止背景滾動 (直到進入)
        document.body.style.overflow = 'hidden';

        window.onload = () => {
            initIcons();
        };
    </script>
</body>
</html>